import{_ as t}from"./plugin-vue_export-helper.21dcd24c.js";import{r as p,o as c,c as o,a,b as l,d as s,e as n}from"./app.5e87ad87.js";const i={},u=s(`<h2 id="\u96C6\u6210\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u96C6\u6210\u6B65\u9AA4" aria-hidden="true">#</a> \u96C6\u6210\u6B65\u9AA4</h2><p>\u8FD9\u5757\u8981\u8BB2\u7684\u662F\u96C6\u6210prometheus+grafana\u505A\u76D1\u63A7\uFF0C\u4E8B\u5148\u4F60\u5F97\u5B89\u88C5\u597Dprometheus+grafana\uFF0C\u8FD9\u4E2A\u5C31\u4E0D\u5C55\u5F00\u8BB2\u4E86\uFF0C\u7F51\u4E0A\u6559\u7A0B\u5F88\u591A\uFF0C\u6D4B\u8BD5\u4F7F\u7528\u53EF\u4EE5\u76F4\u63A5\u7528docker\u5B89\u88C5\uFF0C\u975E\u5E38\u7B80\u5355\uFF0C\u5B89\u88C5\u5B8C\u4E4B\u540E\u63A5\u7740\u5F80\u4E0B\u770B\u3002</p><p>1.\u9996\u5148\u914D\u7F6E\u6587\u4EF6\u4E2D\u5F00\u542Fmicrometer\u6570\u636E\u91C7\u96C6</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>   <span class="token key atrule">enabledCollect</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
   <span class="token key atrule">collectorType</span><span class="token punctuation">:</span> micrometer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2.\u9879\u76EE\u4E2D\u5F15\u5165 micrometer-prometheus \u4F9D\u8D56\uFF0C\u6CE8\u610F\u53EF\u80FD\u6709\u7248\u672C\u4E0D\u517C\u5BB9\u95EE\u9898\uFF0C\u6211\u6D4B\u8BD5\u9047\u5230\u8FC7</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.micrometer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>micrometer-registry-prometheus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.8.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3.\u5F00\u542Fprometheus\u6307\u6807\u91C7\u96C6\u7AEF\u70B9</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">metrics</span><span class="token punctuation">:</span>
    <span class="token key atrule">export</span><span class="token punctuation">:</span>
      <span class="token key atrule">prometheus</span><span class="token punctuation">:</span> 
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>   <span class="token comment"># \u6D4B\u8BD5\u4F7F\u7528\uFF0C\u7EBF\u4E0A\u4E0D\u8981\u7528*\uFF0C\u6309\u9700\u5F00\u542F</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,8),r=n("4.\u914D\u7F6Eprometheus\u6570\u636E\u91C7\u96C6job\uFF0C\u8FD9\u5757\u53EF\u4EE5\u53BB\u4E86\u89E3\u4E0B\u4ED6\u7684SD\u673A\u5236\uFF08Service Discovery\uFF09\uFF0C\u4E5F\u5C31\u662F\u81EA\u52A8\u5230\u6CE8\u518C\u4E2D\u5FC3\u53D1\u73B0\u670D\u52A1\uFF0C\u770B\u4F60\u6240\u7528\u7684\u6CE8\u518C\u4E2D\u5FC3\u652F\u4E0D\u652F\u6301\u8FD9\u79CD\u65B9\u5F0F\uFF0C"),d={href:"https://prometheus.io/docs/prometheus/latest/configuration/configuration/#scrape_config",target:"_blank",rel:"noopener noreferrer"},m=n("\u53EF\u4EE5\u53BB\u5B98\u7F51\u67E5\u770B"),k=n("\uFF0Ck8s\uFF0CZK\uFF0CEureka\u3001Consul\u7B49\u90FD\u662F\u652F\u6301\u7684\u3002\u8FD9\u91CC\u4F7F\u7528static_configs\u65B9\u5F0F\uFF0C\u7B80\u5355\u7684\u6307\u5B9A\u5730\u5740\u7684\u9759\u6001\u914D\u7F6E"),g=s(`<div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token punctuation">-</span> <span class="token key atrule">job_name</span><span class="token punctuation">:</span> <span class="token string">&#39;prometheus&#39;</span>
    <span class="token key atrule">metrics_path</span><span class="token punctuation">:</span> <span class="token string">&#39;/actuator/prometheus&#39;</span>
    <span class="token key atrule">static_configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">targets</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#39;192.168.2.104:9098&#39;</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>job\u914D\u7F6E\u540Eprometheus\u7BA1\u7406\u53F0\u770B\u5230\u5982\u4E0B\u56FE\u6240\u793A\uFF0C\u8BF4\u660E\u5DF2\u7ECF\u5F00\u59CB\u6B63\u5E38\u91C7\u96C6\u6307\u6807\u914D\u7F6E</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/435f0a69790946f8bff7761c40a0a0db~tplv-k3u1fbpfcp-zoom-1.image" alt="\u91C7\u96C6\u6307\u6807" loading="lazy"></p><p>5.\u7136\u540E\u5C31\u662F\u914D\u7F6Egrafana\u6570\u636E\u53EF\u89C6\u5316\uFF0C\u914D\u7F6E\u5982\u4E0B\u56FE\uFF0C\u9700\u8981\u8BE5panel\u914D\u7F6EJson\u7684\u53EF\u4EE5\u52A0\u6211\u53D1\u4F60\uFF0C\u5230\u8FD9\u91CC\u76D1\u63A7\u5C31\u642D\u5EFA\u8D77\u6765\u4E86\uFF0C\u5176\u5B9E\u4E5F\u5F88\u7B80\u5355\uFF0C\u7136\u540E\u5C31\u53EF\u4EE5\u5B9E\u65F6\u76D1\u63A7\u7EBF\u7A0B\u6C60\u6570\u636E\u6307\u6807\u53D8\u52A8\u4E86</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a36430c06bf44ca987ff54b500a14172~tplv-k3u1fbpfcp-zoom-1.image" alt="\u76D1\u63A7\u6570\u636E" loading="lazy"></p><div class="custom-container warning"><p class="custom-container-title">\u6CE8\u610F</p><p>\u5B8C\u6210\u4E0A\u8FF0\u6240\u6709\u6B65\u9AA4\u540E\uFF0C\u8BB0\u5F97\u91CD\u65B0\u4FEE\u6539\u4E0B\u6BCF\u4E2Apannel\u7684\u6570\u636E\u6E90\uFF0C\u8FD9\u6837\u624D\u4F1A\u6B63\u786E\u663E\u793A\u76D1\u63A7\u6570\u636E</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39e2c37af1fb48679b5fdd56e7f89c37~tplv-k3u1fbpfcp-watermark.image?" alt="image.png" loading="lazy"></p></div>`,6);function v(b,f){const e=p("ExternalLinkIcon");return c(),o("div",null,[u,a("p",null,[r,a("a",d,[m,l(e)]),k]),g])}var _=t(i,[["render",v],["__file","prometheus_grafana.html.vue"]]);export{_ as default};
